<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
</head>
<body bgcolor="#262626">
  <!--<font color="white">!-->
  <font color="black">
    <div id="table_info"></div>
    
    <div id="explanation"></div>
    
    <ul id="requests"></ul>

    <!-- Don't need jQuery for Tabletop, but using it for this example -->
    <!-- <script type="text/javascript" src="https://raw.githubusercontent.com/jsoma/tabletop/master/examples/common/jquery.js"></script> !-->
	<script src="http://pastebin.com/raw.php?i=YZRfhRw3"></script>
    <!-- <script type="text/javascript" src="https://raw.githubusercontent.com/jsoma/tabletop/master/src/tabletop.js"></script> !-->
	<script src="http://pastebin.com/raw.php?i=WtLCSUwe"></script>
    <script type="text/javascript">
      //var public_spreadsheet_url = 'https://docs.google.com/spreadsheet/pub?hl=en_US&hl=en_US&key=0AmYzu_s7QHsmdE5OcDE1SENpT1g2R2JEX2tnZ3ZIWHc&output=html';
		var public_spreadsheet_url = 'https://docs.google.com/spreadsheet/pub?hl=en_US&hl=en_US&key=1IKrS5uJcT0dahtSlrwJsREUkNHc6Bk1FryaZfnS8bOU';

      $(document).ready( function() {
        Tabletop.init( { key: public_spreadsheet_url,
                         callback: showInfo,
                         wanted: [ "Requests", "Fulfillments" ],
                         debug: false } )
      })
        
      function showInfo(data, tabletop) {
		var cat_li;
		cat_li=$('<h2>Current Requests:</h2>');
		cat_li.appendTo("#table_info");
        
		$.each( tabletop.sheets("Requests").all(), function(i, requestsData) {
			var found=0;
			var name="example";
			//Parse through the Fulfillment table for a match between requests and fulfillments
			$.each( tabletop.sheets("Fulfillments").all(), function(i, fullfillData) {
				if(requestsData.Handle === fullfillData.Handle && requestsData.Timestamp === fullfillData.OrderDate){
					found=1;
				}

			})

			if(found === 0){//If the request has NOT been fulfilled, then display
					cat_li = $('<h4>' + requestsData.Handle + " (submitted on: "+ requestsData.Timestamp + ')</h4>');
					cat_li.appendTo("#table_info");
					printed=1;
			}
			cat_li.appendTo("#table_info");
        })
	

	}
	  

    </script>
	</font>
	<hr>
	<h1>Example Expansion</h1>
	
	<form action="https://docs.google.com/forms/d/1oS8BJbG-LicL0fvyzpTHHlptdmvt1oFpUjqejtXP8OM/formResponse?embedded=true" method="POST" onsubmit="">
	<div class="panel-group" id="accordion">
		<LABEL for="entry_1702613869">Handle: </LABEL> <INPUT name="entry.1702613869" type="text" id="entry_1702613869">
		<br><LABEL for="entry_653355245">Level: </LABEL> <INPUT name="entry.653355245" type="text" id="entry_653355245">
		
		<div class="panel panel-default">
			<div class="panel-heading">
				<h4 class="panel-title"><span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span> 
				<a data-toggle="collapse" data-parent="#accordion" href="#collapse1">
				Add Head</a>
				</h4>
			</div>
			<div id="collapse1" class="panel-collapse collapse">
				<div class="panel-body">
				Lorem ipsum dolor sit amet, consectetur adipisicing elit,
			sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad
			minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea
			commodo consequat.
				</div>
			</div>
		</div>
		<div class="panel panel-default">
			<div class="panel-heading">
				<h4 class="panel-title"><span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span> 
				<a data-toggle="collapse" data-parent="#accordion" href="#collapse2">
				Add Chest</a>
				</h4>
			</div>
			<div id="collapse2" class="panel-collapse collapse">
				<div class="panel-body">
				</div>
			</div>
		</div>
		<div class="panel panel-default">
			<div class="panel-heading">
				<h4 class="panel-title"><span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span> 
				<a data-toggle="collapse" data-parent="#accordion" href="#collapse3">
				Add Legs</a>
				</h4>
			</div>
			<div id="collapse3" class="panel-collapse collapse">
				<div class="panel-body">
				odo consequat.
				</div>
			</div>
		</div>
		<br><INPUT type="submit" value="Send"> <INPUT type="reset">
	</div>
	</form>

  </body>
</html>