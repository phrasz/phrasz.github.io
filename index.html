<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
</head>
<body style="background-color:#262626">
	<font color="white">
    <div id="table_info"></div>
    
    <div id="explanation"></div>
    
    <ul id="requests"></ul>

	<script src="http://pastebin.com/raw.php?i=YZRfhRw3"></script>
	<script src="http://pastebin.com/raw.php?i=WtLCSUwe"></script>
    <script type="text/javascript">
		var public_spreadsheet_url = 'https://docs.google.com/spreadsheet/pub?hl=en_US&hl=en_US&key=1IKrS5uJcT0dahtSlrwJsREUkNHc6Bk1FryaZfnS8bOU';

		//Other Vars: "Timestamp", "Handle", "Level", "Fullfilled", "Fullfilled By", "Cost"
		var Categories=["Head","Chest","Legs","Feet","Shoulder","Hand","Belt","Shield","Weapon1","Weapon2","Weapon3"];

		var Head=["HeadQuality", "HeadTrait", "HeadMotif", "HeadEnchant", "HeadSet", "HeadCost"];
		var Chest=["ChestQuality", "ChestTrait", "ChestMotif", "ChestEnchant", "ChestSet", "ChestCost"];
		var Legs=["LegsQuality",  "LegsTrait", "LegsMotif", "LegsEnchant", "LegsSet"];
		var Feet=["FeetQuality",  "FeetTrait", "FeetMotif", "FeetEnchant", "FeetSet"];
		var Shoulder=["ShoulderQuality",  "ShoulderTrait", "ShoulderMotif", "ShoulderEnchant", "ShoulderSet"];
		var Hand=["HandQuality",  "HandTrait", "HandMotif", "HandEnchant", "HandSet"];
		var Belt=["BeltQuality",  "BeltTrait", "BeltMotif", "BeltEnchant", "BeltSet"];
		var Shield=["ShieldQuality", "ShieldTrait", "ShieldMotif", "ShieldEnchant", "ShieldSet"];
		var Weapon1=["Weapon1Quality",  "Weapon1Trait", "Weapon1Motif", "Weapon1Enchant",  "Weapon1Set"];
		var Weapon2=["Weapon2Quality", "Weapon2Trait", "Weapon2Motif", "Weapon2Enchant", "Weapon2Set"];
		var Weapon3=["Weapon3Quality", "Weapon3Trait",  "Weapon3Motif", "Weapon3Enchant", "Weapon3Set"];

		
      $(document).ready( function() {
        Tabletop.init( { key: public_spreadsheet_url,
                         callback: showInfo,
                         wanted: [ "Requests", "Fulfillments" ],
                         debug: false } )
      })
        
      function showInfo(data, tabletop){
		//var SectionHeader;
		//SectionHeader=$("<h1><u><b>Current Requests</b></u></h1>");
		$("<h1><u><b>Current Requests</b></u></h1>").appendTo("#table_info");
		
		var RequestRowData=tabletop.sheets("Requests").all();
		var FulfillmentsRowData=tabletop.sheets("Fulfillments").all();
		
		var i,j,k;
		
		for(i=0; i < RequestRowData.length;i++){
		
			var found=0;
			var AllMemberData="";
			var MemberData_Items="";
			var MemberData_Description="";
			//console.log("Handle: "+RequestRowData[i].Handle);
			for(j=0; j < FulfillmentsRowData;j++){
				if(RequestRowData[i].Handle === FulfillmentsRowData[j].Handle && RequestRowData[i].Timestamp === FulfillmentsRowData[j].OrderDate){
					found=1;
				}
			}
			
			if(found === 0){//If the request has NOT been fulfilled, then display
			$("<hr>").appendTo("#table_info");
			AllMemberData="";
				//cat_li = $('<h3>' + RequestRowData[i].Handle + "</h3>(submitted on: "+ RequestRowData[i].Timestamp + ')<br>');
				$("<h3>Request "+(i+1)+": "+ RequestRowData[i].Handle + "</h3>(submitted on: "+ RequestRowData[i].Timestamp + ")<br>").appendTo("#table_info");
				//AllMemberData += "<h3>" + RequestRowData[i].Handle + "</h3>(submitted on: "+ RequestRowData[i].Timestamp + ")<br>'";

/*				
		<!-- PART 1 : TABS LIST !-->
		<ul class="nav nav-tabs">
			<li class="active"><a data-toggle="tab" href="#home">Hand</a></li>
			<li><a data-toggle="tab" href="#menu1">Head</a></li>
			<li><a data-toggle="tab" href="#menu2">Shoulder</a></li>
			<li><a data-toggle="tab" href="#menu3">Shield</a></li>
		</ul>
*/
			//$("<ul class=\"nav nav-tabs\">").appendTo("#table_info");
			AllMemberData+="<ul class=\"nav nav-tabs\">";
			//var Categories=["Head","Chest","Legs","Feet","Shoulder","Hand","Belt","Shield","Weapon1","Weapon2","Weapon3"]
			//	$("		<li class=\"active\"><a data-toggle=\"tab\" href=\"#"+RequestRowData[i].Handle+"menu1\">"+ Categories[0] +"</a></li>").appendTo("#table_info");
			AllMemberData+="		<li class=\"active\"><a data-toggle=\"tab\" href=\"#"+RequestRowData[i].Handle+"menu1\">"+ Categories[0] +"</a></li>";
			for(k=2; k<=Categories.length; k++){
				//$("		<li><a data-toggle=\"tab\" href=\"#"+RequestRowData[i].Handle+"menu"+ k +"\">"+ Categories[k-1] +"</a></li>").appendTo("#table_info");
				AllMemberData+="		<li><a data-toggle=\"tab\" href=\"#"+RequestRowData[i].Handle+"menu"+ k +"\">"+ Categories[k-1] +"</a></li>";
			}
			//$("</ul>").appendTo("#table_info");
			AllMemberData+="</ul>";
			//console.log(AllMemberData);
			$(AllMemberData).appendTo("#table_info");
			
/*
		<!-- PART 2 : TABS CONTENT !-->
		<div class="tab-content">
			<div id="home" class="tab-pane fade in active" style="color:white;">
				<h3>Hand</h3>
					<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
			</div>
			<div id="menu1" class="tab-pane fade" style="color:white;">
				<h3>Menu 1</h3>
					<p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
			</div>
			<div id="menu2" class="tab-pane fade" style="color:white;">
				<h3>Menu 2</h3>
					<p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam.</p>
			</div>
			<div id="menu3" class="tab-pane fade" style="color:white;">
				<h3>Menu 3</h3>
					<p>Eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
			</div>
		</div>
*/
			AllMemberData="";
//			$("<div class=\"tab-content\">").appendTo("#table_info");
			AllMemberData+="<div class=\"tab-content\">";
			
			for(k=1; k<=Categories.length; k++){
				if(k===1){
				//$("		<div id=\""+RequestRowData[i].Handle+"menu"+k+"\" class=\"tab-pane fade in active\" style=\"color:white;\">").appendTo("#table_info");
				AllMemberData+="		<div id=\""+RequestRowData[i].Handle+"menu"+k+"\" class=\"tab-pane fade in active\" style=\"color:white;\">";
				}
				else{
				//$("		<div id=\""+RequestRowData[i].Handle+"menu"+k+"\" class=\"tab-pane fade in\" style=\"color:white;\">").appendTo("#table_info");
				AllMemberData+="		<div id=\""+RequestRowData[i].Handle+"menu"+k+"\" class=\"tab-pane fade in\" style=\"color:white;\">";
				}
				//$("			<h3>"+Categories[k-1]+"</h3>").appendTo("#table_info");
				//$("				<p>").appendTo("#table_info");
				//$("					Test").appendTo("#table_info");
				//$("				</p>").appendTo("#table_info");
				//$("		</div>").appendTo("#table_info");
				AllMemberData+="			<h3>"+Categories[k-1]+"</h3>";
				AllMemberData+="				<p>";
				AllMemberData+="					Test";
				AllMemberData+="				</p>";
				AllMemberData+="		</div>";
			}
			//$("</div>").appendTo("#table_info");
			AllMemberData+="</div>";
			$(AllMemberData).appendTo("#table_info");
				//printed=1;
				//cat_li.appendTo("#table_info");

				//Print Head
				PrintGearHTML(Head,RequestRowData);

			}
		}
	}
	
	function PrintGearHTML(ItemArray, Data){
	var List;
		//DEBUGGGING: Dump all the fields
		//for(var i=0; i<ItemArray.length;i++){
		//	console.log("Hello World!");
		//}
/*		
		<!-- PART 1 : TABS LIST !-->
		<ul class="nav nav-tabs">
			<li class="active"><a data-toggle="tab" href="#home">Hand</a></li>
			<li><a data-toggle="tab" href="#menu1">Head</a></li>
			<li><a data-toggle="tab" href="#menu2">Shoulder</a></li>
			<li><a data-toggle="tab" href="#menu3">Shield</a></li>
		</ul>

		<!-- PART 2 : TABS CONTENT !-->
		<div class="tab-content">
			<div id="home" class="tab-pane fade in active" style="color:white;">
				<h3>Hand</h3>
					<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
			</div>
			<div id="menu1" class="tab-pane fade" style="color:white;">
				<h3>Menu 1</h3>
					<p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
			</div>
			<div id="menu2" class="tab-pane fade" style="color:white;">
				<h3>Menu 2</h3>
					<p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam.</p>
			</div>
			<div id="menu3" class="tab-pane fade" style="color:white;">
				<h3>Menu 3</h3>
					<p>Eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
			</div>
		</div>
 */ 
	}
	  

    </script>
	</font>
	<hr>
	<h1 style="color:#FFFFFF"><u><b>Crafting Order Request</b></u></h1>
	
	<form style="color:#FFFFFF" action="https://docs.google.com/forms/d/1oS8BJbG-LicL0fvyzpTHHlptdmvt1oFpUjqejtXP8OM/formResponse?embedded=true" method="POST" onsubmit="">
	<div class="panel-group" id="accordion">
		<LABEL for="entry_1702613869">Handle: </LABEL> <INPUT name="entry.1702613869" type="text" id="entry_1702613869">
		<br><LABEL for="entry_653355245">Level: </LABEL> <INPUT name="entry.653355245" type="text" id="entry_653355245">
		
		<div class="panel panel-default">
			<div class="panel-heading">
				<h4 class="panel-title"><span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span> 
				<a data-toggle="collapse" data-parent="#accordion" href="#collapse1">
				Add Head</a>
				</h4>
			</div>
			<div id="collapse1" class="panel-collapse collapse">
				<div class="panel-body">

				</div>
			</div>
		</div>
		<div class="panel panel-default">
			<div class="panel-heading">
				<h4 class="panel-title"><span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span> 
				<a data-toggle="collapse" data-parent="#accordion" href="#collapse2">
				Add Chest</a>
				</h4>
			</div>
			<div id="collapse2" class="panel-collapse collapse">
				<div class="panel-body">
				
				</div>
			</div>
		</div>
		<div class="panel panel-default">
			<div class="panel-heading">
				<h4 class="panel-title"><span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span> 
				<a data-toggle="collapse" data-parent="#accordion" href="#collapse3">
				Add Legs</a>
				</h4>
			</div>
			<div id="collapse3" class="panel-collapse collapse">
				<div class="panel-body">

				</div>
			</div>
		</div>

		<div class="panel panel-default">
			<div class="panel-heading">
				<h4 class="panel-title"><span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span> 
				<a data-toggle="collapse" data-parent="#accordion" href="#collapse4">
				Add Feet</a>
				</h4>
			</div>
			<div id="collapse4" class="panel-collapse collapse">
				<div class="panel-body">

				</div>
			</div>
		</div>

		<div class="panel panel-default">
			<div class="panel-heading">
				<h4 class="panel-title"><span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span> 
				<a data-toggle="collapse" data-parent="#accordion" href="#collapse5">
				Add Shoulders</a>
				</h4>
			</div>
			<div id="collapse5" class="panel-collapse collapse">
				<div class="panel-body">

				</div>
			</div>
		</div>

		<div class="panel panel-default">
			<div class="panel-heading">
				<h4 class="panel-title"><span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span> 
				<a data-toggle="collapse" data-parent="#accordion" href="#collapse6">
				Add Hand</a>
				</h4>
			</div>
			<div id="collapse6" class="panel-collapse collapse">
				<div class="panel-body">

				</div>
			</div>
		</div>

		<div class="panel panel-default">
			<div class="panel-heading">
				<h4 class="panel-title"><span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span> 
				<a data-toggle="collapse" data-parent="#accordion" href="#collapse7">
				Add Belt</a>
				</h4>
			</div>
			<div id="collapse7" class="panel-collapse collapse">
				<div class="panel-body">

				</div>
			</div>
		</div>

		<div class="panel panel-default">
			<div class="panel-heading">
				<h4 class="panel-title"><span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span> 
				<a data-toggle="collapse" data-parent="#accordion" href="#collapse8">
				Add Shield</a>
				</h4>
			</div>
			<div id="collapse8" class="panel-collapse collapse">
				<div class="panel-body">

				</div>
			</div>
		</div>

		<div class="panel panel-default">
			<div class="panel-heading">
				<h4 class="panel-title"><span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span> 
				<a data-toggle="collapse" data-parent="#accordion" href="#collapse9">
				Add Weapon 1</a>
				</h4>
			</div>
			<div id="collapse9" class="panel-collapse collapse">
				<div class="panel-body">

				</div>
			</div>
		</div>

		<div class="panel panel-default">
			<div class="panel-heading">
				<h4 class="panel-title"><span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span> 
				<a data-toggle="collapse" data-parent="#accordion" href="#collapse10">
				Add Weapon 2</a>
				</h4>
			</div>
			<div id="collapse10" class="panel-collapse collapse">
				<div class="panel-body">

				</div>
			</div>
		</div>

		<div class="panel panel-default">
			<div class="panel-heading">
				<h4 class="panel-title"><span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span> 
				<a data-toggle="collapse" data-parent="#accordion" href="#collapse11">
				Add Weapon 3</a>
				</h4>
			</div>
			<div id="collapse11" class="panel-collapse collapse">
				<div class="panel-body">

				</div>
			</div>
		</div>
		<br><INPUT type="submit" value="Send"> <INPUT type="reset">
	</div>
	</form>

  </body>
</html>
